<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>VisionCharts Demo</title>
  <style>
    body {
      font-family: 'Segoe UI', -apple-system, BlinkMacSystemFont, system-ui, Roboto, sans-serif;
      max-width: 1200px;
      margin: 0 auto;
      padding: 20px;
      color: #333;
      background-color: #f9f9f9;
    }
    
    header {
      margin-bottom: 40px;
      border-bottom: 1px solid #eee;
      padding-bottom: 20px;
    }
    
    h1 {
      color: #1468a8;
    }
    
    .chart-container {
      height: 400px;
      margin-bottom: 40px;
      border: 1px solid #eee;
      border-radius: 8px;
      padding: 20px;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
      background-color: #fff;
    }
    
    .controls {
      display: flex;
      gap: 20px;
      margin-bottom: 20px;
      flex-wrap: wrap;
    }
    
    .control-group {
      display: flex;
      flex-direction: column;
      gap: 5px;
    }
    
    label {
      font-weight: 600;
      font-size: 14px;
    }
    
    button {
      padding: 8px 16px;
      background-color: #1468a8;
      color: white;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      font-weight: 500;
      transition: background-color 0.2s;
    }
    
    button:hover {
      background-color: #0d5082;
    }

    button.active {
      background-color: #34A853;
    }
    
    select, input {
      padding: 8px;
      border: 1px solid #ddd;
      border-radius: 4px;
      min-width: 120px;
    }
    
    .tabs {
      display: flex;
      border-bottom: 1px solid #ddd;
      margin-bottom: 30px;
    }
    
    .tab {
      padding: 10px 20px;
      cursor: pointer;
      border: 1px solid transparent;
      border-bottom: none;
      border-radius: 4px 4px 0 0;
      margin-right: 5px;
      background-color: #f5f5f5;
      transition: background-color 0.2s;
    }
    
    .tab.active {
      background-color: #fff;
      border-color: #ddd;
      position: relative;
    }
    
    .tab.active::after {
      content: '';
      position: absolute;
      bottom: -1px;
      left: 0;
      right: 0;
      height: 1px;
      background-color: #fff;
    }

    .tab:hover {
      background-color: #e9e9e9;
    }

    .tab.active:hover {
      background-color: #fff;
    }

    footer {
      margin-top: 60px;
      padding-top: 20px;
      border-top: 1px solid #eee;
      text-align: center;
      color: #666;
    }
  </style>
</head>
<body>
  <header>
    <h1>VisionCharts Demo</h1>
    <p>A modern, high-performance JavaScript charting library optimized for financial and economic data visualization.</p>
  </header>
  
  <div class="tabs">
    <div class="tab active" data-tab="line">Line Chart</div>
    <div class="tab" data-tab="area">Area Chart</div>
    <div class="tab" data-tab="bar">Bar Chart</div>
  </div>
  
  <main>
    <!-- Line Chart Section -->
    <section id="line-section" class="chart-section">
      <h2>Line Chart</h2>
      <div class="controls">
        <div class="control-group">
          <label for="line-curve">Curve Type</label>
          <select id="line-curve">
            <option value="linear">Linear</option>
            <option value="step">Step</option>
            <option value="cardinal">Cardinal</option>
            <option value="monotone" selected>Monotone</option>
          </select>
        </div>
        <div class="control-group">
          <label for="line-x-name">X Axis Name</label>
          <input type="text" id="line-x-name" value="Date" placeholder="X Axis Name">
        </div>
        <div class="control-group">
          <label for="line-y-name">Y Axis Name</label>
          <input type="text" id="line-y-name" value="Price ($)" placeholder="Y Axis Name">
        </div>
        <div class="control-group">
          <button id="line-toggle-log" class="toggle-button">Toggle Logarithmic</button>
        </div>
        <div class="control-group">
          <button id="line-toggle-panel" class="toggle-button">Toggle Panel View</button>
        </div>
        <div class="control-group">
          <button id="line-toggle-recession" class="toggle-button">Toggle Recessions</button>
        </div>
        <div class="control-group">
          <button id="line-toggle-zero" class="toggle-button">Toggle Zero Line</button>
        </div>
        <div class="control-group">
          <button id="line-toggle-area" class="toggle-button">Toggle Area</button>
        </div>
      </div>
      <div id="line-chart" class="chart-container"></div>
    </section>
    
    <!-- Area Chart Section -->
    <section id="area-section" class="chart-section" style="display: none;">
      <h2>Area Chart</h2>
      <div class="controls">
        <div class="control-group">
          <label for="area-curve">Curve Type</label>
          <select id="area-curve">
            <option value="linear">Linear</option>
            <option value="step">Step</option>
            <option value="cardinal">Cardinal</option>
            <option value="monotone" selected>Monotone</option>
          </select>
        </div>
        <div class="control-group">
          <label for="area-x-name">X Axis Name</label>
          <input type="text" id="area-x-name" value="Date" placeholder="X Axis Name">
        </div>
        <div class="control-group">
          <label for="area-y-name">Y Axis Name</label>
          <input type="text" id="area-y-name" value="Value" placeholder="Y Axis Name">
        </div>
        <div class="control-group">
          <button id="area-toggle-log" class="toggle-button">Toggle Logarithmic</button>
        </div>
        <div class="control-group">
          <button id="area-toggle-stacked" class="toggle-button">Toggle Stacked</button>
        </div>
        <div class="control-group">
          <button id="area-toggle-panel" class="toggle-button">Toggle Panel View</button>
        </div>
        <div class="control-group">
          <button id="area-toggle-recession" class="toggle-button">Toggle Recessions</button>
        </div>
        <div class="control-group">
          <button id="area-toggle-zero" class="toggle-button">Toggle Zero Line</button>
        </div>
      </div>
      <div id="area-chart" class="chart-container"></div>
    </section>
    
    <!-- Bar Chart Section -->
    <section id="bar-section" class="chart-section" style="display: none;">
      <h2>Bar Chart</h2>
      <div class="controls">
        <div class="control-group">
          <label for="bar-width">Bar Width</label>
          <input type="range" id="bar-width" min="0.1" max="1" step="0.1" value="0.7">
        </div>
        <div class="control-group">
          <label for="bar-x-name">X Axis Name</label>
          <input type="text" id="bar-x-name" value="Category" placeholder="X Axis Name">
        </div>
        <div class="control-group">
          <label for="bar-y-name">Y Axis Name</label>
          <input type="text" id="bar-y-name" value="Value" placeholder="Y Axis Name">
        </div>
        <div class="control-group">
          <button id="bar-toggle-log" class="toggle-button">Toggle Logarithmic</button>
        </div>
        <div class="control-group">
          <button id="bar-toggle-group" class="toggle-button active">Toggle Grouped</button>
        </div>
        <div class="control-group">
          <button id="bar-toggle-panel" class="toggle-button">Toggle Panel View</button>
        </div>
        <div class="control-group">
          <button id="bar-toggle-zero" class="toggle-button active">Toggle Zero Line</button>
        </div>
        <div class="control-group">
          <button id="bar-toggle-values" class="toggle-button">Toggle Values</button>
        </div>
      </div>
      <div id="bar-chart" class="chart-container"></div>
    </section>
  </main>
  
  <footer>
    <p>VisionCharts v0.2.0 | MIT License | &copy; 2025 VisionKernel Team</p>
  </footer>
  
  <script type="module">
    import VisionCharts from '../dist/visioncharts.esm.js';
    const { LineChart, AreaChart, BarChart, calculateIndicator } = VisionCharts;
    
    // Demo data
    const mockTimeSeriesData = generateTimeSeriesData();
    const multipleDatasets = generateMultipleDatasets();
    const barData = generateBarData();
    
    // US recessions data
    const recessions = [
      { start: new Date('2007-12-01'), end: new Date('2009-06-30') },
      { start: new Date('2020-02-01'), end: new Date('2020-04-30') }
    ];
    
    // Chart instances
    let lineChart;
    let areaChart;
    let barChart;
    
    // Tab functionality
    const tabs = document.querySelectorAll('.tab');
    const sections = document.querySelectorAll('.chart-section');
    
    tabs.forEach(tab => {
      tab.addEventListener('click', () => {
        // Deactivate all tabs
        tabs.forEach(t => t.classList.remove('active'));
        
        // Hide all sections
        sections.forEach(s => s.style.display = 'none');
        
        // Activate clicked tab
        tab.classList.add('active');
        
        // Show corresponding section
        const tabName = tab.getAttribute('data-tab');
        const section = document.getElementById(`${tabName}-section`);
        section.style.display = 'block';
        
        // Initialize chart if not already created
        switch(tabName) {
          case 'line':
            initLineChart();
            break;
          case 'area':
            initAreaChart();
            break;
          case 'bar':
            initBarChart();
            break;
        }
      });
    });
    
    // Initialize Line Chart
    function initLineChart() {
      if (lineChart) return;
      
      lineChart = new LineChart({
        container: '#line-chart',
        data: multipleDatasets,
        options: {
          title: 'Stock Price Comparison',
          xField: 'date',
          yField: 'price',
          xType: 'time',
          yType: 'number',
          xAxisName: 'Date',
          yAxisName: 'Price ($)',
          curve: 'monotone',
          showPoints: false,
          area: false,
          showZeroLine: false,
          showRecessionLines: false,
          recessions: recessions,
          isPanelView: false,
          isLogarithmic: false
        }
      });
      
      lineChart.render();
      
      // Add study for first dataset
      const smaData = calculateIndicator('sma', multipleDatasets[0].data, {
        period: 20,
        valueField: 'price',
        xField: 'date'
      });
      
      lineChart.addStudy(multipleDatasets[0].id, {
        id: 'sma-20',
        type: 'sma',
        name: 'SMA (20)',
        color: '#9C27B0',
        width: 1.5,
        params: { period: 20 }
      });
      
      // Add event listeners for controls
      document.getElementById('line-curve').addEventListener('change', (e) => {
        lineChart.setOptions({ curve: e.target.value });
        lineChart.update();
      });
      
      document.getElementById('line-x-name').addEventListener('input', (e) => {
        lineChart.setXAxisName(e.target.value);
      });
      
      document.getElementById('line-y-name').addEventListener('input', (e) => {
        lineChart.setYAxisName(e.target.value);
      });
      
      document.getElementById('line-toggle-log').addEventListener('click', (e) => {
        e.target.classList.toggle('active');
        lineChart.toggleLogarithmic(e.target.classList.contains('active'));
      });
      
      document.getElementById('line-toggle-panel').addEventListener('click', (e) => {
        e.target.classList.toggle('active');
        lineChart.togglePanelView(e.target.classList.contains('active'));
      });
      
      document.getElementById('line-toggle-recession').addEventListener('click', (e) => {
        e.target.classList.toggle('active');
        lineChart.toggleRecessionLines(e.target.classList.contains('active'));
      });
      
      document.getElementById('line-toggle-zero').addEventListener('click', (e) => {
        e.target.classList.toggle('active');
        lineChart.toggleZeroLine(e.target.classList.contains('active'));
      });
      
      document.getElementById('line-toggle-area').addEventListener('click', (e) => {
        e.target.classList.toggle('active');
        lineChart.setOptions({ area: e.target.classList.contains('active') });
        lineChart.update();
      });
    }
    
    // Initialize Area Chart
    function initAreaChart() {
      if (areaChart) return;
      
      areaChart = new AreaChart({
        container: '#area-chart',
        data: multipleDatasets,
        options: {
          title: 'Area Chart Example',
          xField: 'date',
          yField: 'price',
          xType: 'time',
          yType: 'number',
          xAxisName: 'Date',
          yAxisName: 'Value',
          curve: 'monotone',
          showPoints: false,
          area: true,
          stacked: false,
          gradient: true,
          areaOpacity: 0.2,
          showZeroLine: false,
          showRecessionLines: false,
          recessions: recessions,
          isPanelView: false,
          isLogarithmic: false
        }
      });
      
      areaChart.render();
      
      // Add event listeners for controls
      document.getElementById('area-curve').addEventListener('change', (e) => {
        areaChart.setOptions({ curve: e.target.value });
        areaChart.update();
      });
      
      document.getElementById('area-x-name').addEventListener('input', (e) => {
        areaChart.setXAxisName(e.target.value);
      });
      
      document.getElementById('area-y-name').addEventListener('input', (e) => {
        areaChart.setYAxisName(e.target.value);
      });
      
      document.getElementById('area-toggle-log').addEventListener('click', (e) => {
        e.target.classList.toggle('active');
        areaChart.toggleLogarithmic(e.target.classList.contains('active'));
      });
      
      document.getElementById('area-toggle-stacked').addEventListener('click', (e) => {
        e.target.classList.toggle('active');
        areaChart.toggleStacked(e.target.classList.contains('active'));
      });
      
      document.getElementById('area-toggle-panel').addEventListener('click', (e) => {
        e.target.classList.toggle('active');
        areaChart.togglePanelView(e.target.classList.contains('active'));
      });
      
      document.getElementById('area-toggle-recession').addEventListener('click', (e) => {
        e.target.classList.toggle('active');
        areaChart.toggleRecessionLines(e.target.classList.contains('active'));
      });
      
      document.getElementById('area-toggle-zero').addEventListener('click', (e) => {
        e.target.classList.toggle('active');
        areaChart.toggleZeroLine(e.target.classList.contains('active'));
      });
    }
    
    // Initialize Bar Chart
    function initBarChart() {
      if (barChart) return;
      
      barChart = new BarChart({
        container: '#bar-chart',
        data: barData,
        options: {
          title: 'Quarterly Revenue',
          xField: 'category',
          yField: 'value',
          xType: 'category',
          yType: 'number',
          xAxisName: 'Category',
          yAxisName: 'Value',
          barWidth: 0.7,
          barSpacing: 0.2,
          barGap: 0.05,
          groupBars: true,
          showValues: false,
          valuePosition: 'top',
          showZeroLine: true,
          isPanelView: false,
          isLogarithmic: false
        }
      });
      
      barChart.render();
      
      // Add event listeners for controls
      document.getElementById('bar-width').addEventListener('input', (e) => {
        barChart.setBarWidth(parseFloat(e.target.value));
      });
      
      document.getElementById('bar-x-name').addEventListener('input', (e) => {
        barChart.setXAxisName(e.target.value);
      });
      
      document.getElementById('bar-y-name').addEventListener('input', (e) => {
        barChart.setYAxisName(e.target.value);
      });
      
      document.getElementById('bar-toggle-log').addEventListener('click', (e) => {
        e.target.classList.toggle('active');
        barChart.toggleLogarithmic(e.target.classList.contains('active'));
      });
      
      document.getElementById('bar-toggle-group').addEventListener('click', (e) => {
        e.target.classList.toggle('active');
        barChart.toggleGroupBars(e.target.classList.contains('active'));
      });
      
      document.getElementById('bar-toggle-panel').addEventListener('click', (e) => {
        e.target.classList.toggle('active');
        barChart.togglePanelView(e.target.classList.contains('active'));
      });
      
      document.getElementById('bar-toggle-zero').addEventListener('click', (e) => {
        e.target.classList.toggle('active');
        barChart.toggleZeroLine(e.target.classList.contains('active'));
      });
      
      document.getElementById('bar-toggle-values').addEventListener('click', (e) => {
        e.target.classList.toggle('active');
        barChart.toggleShowValues(e.target.classList.contains('active'), 'top');
      });
    }
    
    // Generate sample time series data
    function generateTimeSeriesData(days = 30, startPrice = 150, volatility = 0.02) {
      const data = [];
      let price = startPrice;
      const today = new Date();
      
      for (let i = 0; i < days; i++) {
        const date = new Date();
        date.setDate(today.getDate() - (days - i));
        
        // Random price movement
        const change = (Math.random() - 0.5) * volatility * price;
        price += change;
        
        data.push({
          date: date,
          price: Math.max(0.1, price)
        });
      }
      
      return data;
    }
    
    // Generate multiple datasets
    function generateMultipleDatasets() {
      const companies = [
        { id: 'company-1', name: 'Company A', color: '#1468a8', startPrice: 100 },
        { id: 'company-2', name: 'Company B', color: '#34A853', startPrice: 80 },
        { id: 'company-3', name: 'Company C', color: '#FBBC05', startPrice: 120 }
      ];
      
      return companies.map(company => ({
        id: company.id,
        name: company.name,
        color: company.color,
        width: 2,
        data: generateTimeSeriesData(60, company.startPrice, 0.02)
      }));
    }
    
    // Generate bar chart data
    function generateBarData() {
      const categories = ['Q1', 'Q2', 'Q3', 'Q4'];
      const companies = [
        { id: 'company-1', name: 'Company A', color: '#1468a8' },
        { id: 'company-2', name: 'Company B', color: '#34A853' },
        { id: 'company-3', name: 'Company C', color: '#FBBC05' }
      ];
      
      return companies.map(company => ({
        id: company.id,
        name: company.name,
        color: company.color,
        data: categories.map(category => ({
          category,
          value: Math.floor(Math.random() * 100) + 20
        }))
      }));
    }
    
    // Initialize line chart on page load
    initLineChart();
  </script>
</body>
</html>